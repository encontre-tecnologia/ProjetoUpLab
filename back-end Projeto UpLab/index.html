<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheoLingo - Seu Duolingo de Teologia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Uma fonte mais moderna, se disponível */
        }
        .option-button {
            transition: all 0.2s ease-in-out;
        }
        .option-button.selected {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #22c55e !important; /* green-500 */
            color: white !important;
            border-color: #16a34a !important; /* green-600 */
        }
        .incorrect {
            background-color: #ef4444 !important; /* red-500 */
            color: white !important;
            border-color: #dc2626 !important; /* red-600 */
        }
        .disabled-option {
            opacity: 0.7;
            pointer-events: none;
        }
        #feedback-message strong {
            font-size: 1.1em;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body class="bg-slate-100 flex flex-col items-center justify-center min-h-screen p-4 selection:bg-sky-200">

    <div class="bg-white shadow-2xl rounded-xl p-6 md:p-10 w-full max-w-3xl">
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-sky-700">
                <i class="fas fa-bible mr-2"></i>TheoLingo
            </h1>
            <p class="text-slate-600 text-lg">Aprofunde seu conhecimento teológico.</p>
        </header>

        <div id="quiz-container">
            <div class="mb-6">
                <div class="flex justify-between text-sm text-slate-500 mb-1">
                    <span>Progresso</span>
                    <span id="progress-text">0/0</span>
                </div>
                <div class="w-full bg-slate-200 rounded-full h-3">
                    <div id="progress-bar" class="bg-sky-500 h-3 rounded-full transition-all duration-300 ease-out" style="width: 0%;"></div>
                </div>
            </div>

            <div id="question-area" class="mb-8 min-h-[100px]">
                <p id="category" class="text-sm text-sky-600 font-semibold mb-1"></p>
                <h2 id="question-text" class="text-2xl md:text-3xl font-semibold text-slate-800">
                    Carregando pergunta...
                </h2>
            </div>

            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                </div>

            <div id="feedback-area" class="min-h-[100px] p-4 rounded-lg mb-6" style="display: none;">
                <div id="feedback-header" class="flex items-center mb-2">
                    <i id="feedback-icon" class="fas fa-check-circle text-2xl mr-3"></i>
                    <h3 id="feedback-title" class="text-xl font-bold"></h3>
                </div>
                <p id="feedback-message" class="text-slate-700"></p>
                <p id="feedback-explanation" class="text-sm text-slate-600 mt-2 italic"></p>
            </div>

            <div class="text-center">
                <button id="action-button"
                    class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200 ease-in-out w-full md:w-auto disabled:opacity-50 disabled:cursor-not-allowed">
                    Verificar
                </button>
            </div>
        </div>

        <div id="results-container" class="text-center" style="display: none;">
            <h2 class="text-3xl font-bold text-sky-700 mb-4">Quiz Finalizado!</h2>
            <i class="fas fa-award text-7xl text-yellow-500 mb-6"></i>
            <p class="text-xl text-slate-700 mb-2">Sua pontuação final é:</p>
            <p id="final-score" class="text-5xl font-bold text-sky-600 mb-8"></p>
            <p class="text-slate-600 mb-4">"Procura apresentar-te a Deus aprovado, como obreiro que não tem de que se envergonhar, que maneja bem a palavra da verdade." - 2 Timóteo 2:15</p>
            <button id="restart-button"
                class="bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-md hover:shadow-lg transition-all duration-200 ease-in-out">
                Tentar Novamente
            </button>
        </div>

        <footer class="mt-10 text-center text-sm text-slate-400">
            <p>&copy; <span id="currentYear"></span> TheoLingo. Inspirado para o estudo da Palavra.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
                {
                    category: "Antigo Testamento",
                    question: "Quem foi o primeiro rei de Israel, ungido pelo profeta Samuel?",
                    options: ["Davi", "Saul", "Salomão", "Roboão"],
                    correctAnswer: "Saul",
                    explanation: "Saul foi o primeiro rei de Israel, escolhido por Deus e ungido por Samuel (1 Samuel 10:1)."
                },
                {
                    category: "Novo Testamento",
                    question: "Qual evangelho é considerado o mais antigo e provavelmente serviu de fonte para Mateus e Lucas?",
                    options: ["João", "Mateus", "Marcos", "Lucas"],
                    correctAnswer: "Marcos",
                    explanation: "Muitos estudiosos acreditam que o Evangelho de Marcos foi o primeiro a ser escrito e serviu como uma das fontes para Mateus e Lucas."
                },
                {
                    category: "Doutrina da Trindade",
                    question: "A doutrina da Trindade afirma que Deus é:",
                    options: ["Três deuses separados", "Um Deus em três pessoas", "Um Deus que se manifesta de três formas diferentes em momentos diferentes", "Um anjo poderoso"],
                    correctAnswer: "Um Deus em três pessoas",
                    explanation: "A doutrina cristã da Trindade professa um só Deus em três Pessoas co-iguais e co-eternas: Pai, Filho e Espírito Santo."
                },
                {
                    category: "Livros da Bíblia",
                    question: "Quantos livros compõem o Antigo Testamento na Bíblia Protestante?",
                    options: ["27", "39", "46", "66"],
                    correctAnswer: "39",
                    explanation: "O cânon protestante do Antigo Testamento contém 39 livros."
                },
                {
                    category: "Personagens Bíblicos",
                    question: "Qual destes homens foi conhecido por sua excepcional sabedoria, concedida por Deus?",
                    options: ["Moisés", "Josué", "Salomão", "Sansão"],
                    correctAnswer: "Salomão",
                    explanation: "Salomão pediu a Deus sabedoria para governar seu povo, e Deus lhe concedeu grande sabedoria e conhecimento (1 Reis 3:5-14)."
                },
                {
                    category: "Eventos Bíblicos",
                    question: "Onde Jesus realizou seu primeiro milagre registrado, transformando água em vinho?",
                    options: ["Jerusalém", "Belém", "Caná da Galileia", "Nazaré"],
                    correctAnswer: "Caná da Galileia",
                    explanation: "O primeiro milagre de Jesus, transformar água em vinho, ocorreu nas bodas em Caná da Galileia (João 2:1-11)."
                },
                 {
                    category: "Teologia Sistemática",
                    question: "O estudo da salvação é chamado de:",
                    options: ["Escatologia", "Soteriologia", "Eclesiologia", "Pneumatologia"],
                    correctAnswer: "Soteriologia",
                    explanation: "Soteriologia é o ramo da teologia cristã que estuda a doutrina da salvação."
                }
            ];

            let currentQuestionIndex = 0;
            let score = 0;
            let selectedOptionButton = null;

            const categoryEl = document.getElementById('category');
            const questionTextEl = document.getElementById('question-text');
            const optionsContainerEl = document.getElementById('options-container');
            const feedbackAreaEl = document.getElementById('feedback-area');
            const feedbackIconEl = document.getElementById('feedback-icon');
            const feedbackTitleEl = document.getElementById('feedback-title');
            const feedbackMessageEl = document.getElementById('feedback-message');
            const feedbackExplanationEl = document.getElementById('feedback-explanation');
            const actionButtonEl = document.getElementById('action-button');
            const progressBarEl = document.getElementById('progress-bar');
            const progressTextEl = document.getElementById('progress-text');
            
            const quizContainerEl = document.getElementById('quiz-container');
            const resultsContainerEl = document.getElementById('results-container');
            const finalScoreEl = document.getElementById('final-score');
            const restartButtonEl = document.getElementById('restart-button');
            
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            function shuffleArray(array) { // Para embaralhar perguntas ou opções futuramente
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function loadQuestion() {
                feedbackAreaEl.style.display = 'none';
                actionButtonEl.textContent = 'Verificar';
                actionButtonEl.disabled = true; // Habilitar somente após seleção
                selectedOptionButton = null;

                if (currentQuestionIndex < questions.length) {
                    const currentQuestion = questions[currentQuestionIndex];
                    categoryEl.textContent = currentQuestion.category || "Teologia Geral";
                    questionTextEl.textContent = currentQuestion.question;
                    optionsContainerEl.innerHTML = '';

                    // Embaralhar opções para não terem sempre a mesma ordem (opcional)
                    // const shuffledOptions = [...currentQuestion.options];
                    // shuffleArray(shuffledOptions);

                    currentQuestion.options.forEach(optionText => {
                        const button = document.createElement('button');
                        button.textContent = optionText;
                        button.classList.add('option-button', 'w-full', 'p-4', 'border-2', 'border-slate-300', 'rounded-lg', 'text-left', 'hover:bg-sky-100', 'hover:border-sky-400', 'focus:outline-none', 'focus:ring-2', 'focus:ring-sky-500', 'text-slate-700', 'font-medium');
                        button.addEventListener('click', () => selectOption(button, optionText));
                        optionsContainerEl.appendChild(button);
                    });
                    updateProgress();
                } else {
                    showResults();
                }
            }

            function selectOption(button, optionText) {
                if (actionButtonEl.textContent === 'Continuar') return; // Não permite mudar após verificação

                if (selectedOptionButton) {
                    selectedOptionButton.classList.remove('selected', 'bg-sky-200', 'border-sky-500', 'ring-2', 'ring-sky-500');
                    selectedOptionButton.classList.add('border-slate-300', 'hover:bg-sky-100');
                }
                selectedOptionButton = button;
                selectedOptionButton.classList.add('selected', 'bg-sky-200', 'border-sky-500', 'ring-2', 'ring-sky-500');
                selectedOptionButton.classList.remove('hover:bg-sky-100');
                actionButtonEl.disabled = false;
            }

            function checkAnswer() {
                if (!selectedOptionButton) return;

                const currentQuestion = questions[currentQuestionIndex];
                const selectedAnswer = selectedOptionButton.textContent;
                const isCorrect = selectedAnswer === currentQuestion.correctAnswer;

                // Desabilitar todas as opções
                Array.from(optionsContainerEl.children).forEach(btn => {
                    btn.classList.add('disabled-option');
                    btn.disabled = true;
                    // Remover estilos de seleção não corretos
                    if (btn !== selectedOptionButton) {
                         btn.classList.remove('selected', 'bg-sky-200', 'border-sky-500', 'ring-2', 'ring-sky-500');
                    }
                });

                feedbackAreaEl.classList.remove('fade-in'); // reset animation
                void feedbackAreaEl.offsetWidth; // trigger reflow
                feedbackAreaEl.classList.add('fade-in');

                if (isCorrect) {
                    score++;
                    selectedOptionButton.classList.remove('bg-sky-200', 'border-sky-500');
                    selectedOptionButton.classList.add('correct');
                    feedbackIconEl.className = 'fas fa-check-circle text-2xl mr-3 text-green-500';
                    feedbackTitleEl.textContent = 'Correto!';
                    feedbackTitleEl.className = 'text-xl font-bold text-green-600';
                    feedbackMessageEl.textContent = 'Muito bem! Você acertou.';
                    feedbackAreaEl.classList.remove('bg-red-50', 'border-red-500');
                    feedbackAreaEl.classList.add('bg-green-50', 'border-l-4', 'border-green-500');
                } else {
                    selectedOptionButton.classList.remove('bg-sky-200', 'border-sky-500');
                    selectedOptionButton.classList.add('incorrect');
                    feedbackIconEl.className = 'fas fa-times-circle text-2xl mr-3 text-red-500';
                    feedbackTitleEl.textContent = 'Ops, não foi desta vez!';
                    feedbackTitleEl.className = 'text-xl font-bold text-red-600';
                    feedbackMessageEl.innerHTML = `A resposta correta era: <strong>${currentQuestion.correctAnswer}</strong>.`;
                    feedbackAreaEl.classList.remove('bg-green-50', 'border-green-500');
                    feedbackAreaEl.classList.add('bg-red-50', 'border-l-4', 'border-red-500');

                    // Destacar a resposta correta
                    Array.from(optionsContainerEl.children).forEach(btn => {
                        if (btn.textContent === currentQuestion.correctAnswer) {
                            btn.classList.add('correct');
                        }
                    });
                }

                feedbackExplanationEl.textContent = currentQuestion.explanation;
                feedbackAreaEl.style.display = 'block';
                actionButtonEl.textContent = 'Continuar';
                actionButtonEl.disabled = false; // Re-enable for "Continuar"
                updateProgress(); // Atualiza progresso também aqui caso queira barra de progresso avançando na resposta
            }

            function nextQuestion() {
                currentQuestionIndex++;
                loadQuestion();
            }

            function updateProgress() {
                const progressPercentage = (currentQuestionIndex / questions.length) * 100;
                progressBarEl.style.width = `${progressPercentage}%`;
                progressTextEl.textContent = `${currentQuestionIndex}/${questions.length}`;
                if (actionButtonEl.textContent === 'Continuar') { // Se já respondido, mostramos o progresso da questão atual como "concluída"
                     const progressActual = ((currentQuestionIndex +1) / questions.length) * 100;
                     progressBarEl.style.width = `${progressActual}%`;
                     progressTextEl.textContent = `${currentQuestionIndex+1}/${questions.length}`;
                }
            }

            function showResults() {
                quizContainerEl.style.display = 'none';
                resultsContainerEl.style.display = 'block';
                resultsContainerEl.classList.add('fade-in');
                finalScoreEl.textContent = `${score} / ${questions.length}`;
            }
            
            function restartQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                selectedOptionButton = null;
                resultsContainerEl.style.display = 'none';
                quizContainerEl.style.display = 'block';
                loadQuestion();
            }

            actionButtonEl.addEventListener('click', () => {
                if (actionButtonEl.textContent === 'Verificar') {
                    if(selectedOptionButton) { // Só verifica se uma opção foi selecionada
                        checkAnswer();
                    }
                } else {
                    nextQuestion();
                }
            });

            restartButtonEl.addEventListener('click', restartQuiz);

            // Initial Load
            // shuffleArray(questions); // Embaralha a ordem das perguntas no início
            loadQuestion();
        });
    </script>
</body>
</html>